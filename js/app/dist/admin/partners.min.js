"use strict";!function(a){function b(a){c(f.getAdditionalPropertyData("logoPath"))}function c(a){return""===a?(i.innerHTML="",void j.classList.add("hidden")):(i.innerHTML='<img style="max-width:300px;" src="'+a+'" />',void j.classList.remove("hidden"))}function d(){c("")}var e=new app.Alert,f=new app.AdminForm({labelItemText:"Partner",labelItemsText:"Partners",loadItems:{fn:"partnersGetJson",params:{partnerId:-1,projectId:-1},rowTmpl:'<div class="admin-grid-row{{rowClass}}" data-id="{{partnerId}}"><div class="admin-grid-col admin-grid-col-primary">{{name}}</div><div class="admin-grid-col">{{active}}</div><div class="admin-grid-col"><button class="btn btn-ripple btn-edit">Edit</button><button class="btn btn-ripple btn-delete">Delete</button></div></div>',rowTmplHeaders:["","Partner","Active"],rowTmplProps:["partnerId","name","active"]},editItem:{fn:"partnersGetJson",params:{projectId:-1},itemId:"partnerId",callback:b},saveItem:{fn:"partnerSave",itemId:"partnerId",sendAsString:!0},deleteItem:{fn:"partnerDelete",itemId:"partnerId"},back:{fn:d},additionalProperties:{logoPath:"",logoFileName:""}}),g=app.$("#btn-upload-img"),h=app.$("#f-upload-img"),i=app.$("#prev-img"),j=app.$("#btn-img-delete");g.addEventListener("click",function(a){return h.click()}),h.addEventListener("change",function(a){var b=a.dataTransfer?a.dataTransfer.files:a.currentTarget.files,d=b[0];f.uploadHelper(d,!0,"/admin/uploadFile.ashx",{"X-File-Path":"img/partners/","X-Mime-Type":"image/svg+xml"},function(a){a&&(f.setAdditionalPropertyData("logoPath",a.filePath),f.setAdditionalPropertyData("logoFileName",a.fileName),c(a.filePath)),h.value=""})}),j.addEventListener("click",function(a){e.promptAlert("Confirm Delete","<p>Are you sure you want to delete this image?","Delete","Cancel",function(a){f.setAdditionalPropertyData("logoPath",""),f.setAdditionalPropertyData("logoFileName",""),c(""),e.dismissAlert(),a.preventDefault()},function(a){e.dismissAlert(),a.preventDefault()})})}(document);