{"version":3,"sources":["../../admin/bios.js"],"names":["doc","alert","app","Alert","adminForm","AdminForm","labelItemText","labelItemsText","loadItems","fn","params","bioId","rowTmpl","rowTmplHeaders","rowTmplProps","editItem","itemId","callback","editItemCallback","saveItem","sendAsString","deleteItem","back","additionalProperties","imgPath","imgFileName","btnUploadImg","$","fUploadImg","prevImg","btnImgDelete","addEventListener","click","files","e","dataTransfer","currentTarget","file","uploadHelper","rsp","setAdditionalPropertyData","filePath","fileName","setPrevImg","value","promptAlert","dismissAlert","evt","preventDefault","obj","getAdditionalPropertyData","innerHTML","classList","add","remove","document"],"mappings":"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","file":"bios.js","sourcesContent":["/**\r\n* Copyright 2016 Select Interactive, LLC. All rights reserved.\r\n* @author: The Select Interactive dev team (www.select-interactive.com)\r\n*/\r\n(function( doc ) {\r\n    'use strict';\r\n\r\n    const alert = new app.Alert();\r\n\r\n    let adminForm = new app.AdminForm( {\r\n\t\tlabelItemText: 'Bio',\r\n\t\tlabelItemsText: 'Bios',\r\n\t\tloadItems: {\r\n\t\t\tfn: 'biosGetJson',\r\n\t\t\tparams: {\r\n                bioId: -1\r\n            },\r\n\t\t\trowTmpl: '<div class=\"admin-grid-row{{rowClass}}\" data-id=\"{{bioId}}\">' +\r\n\t\t\t\t\t '<div class=\"admin-grid-col admin-grid-col-primary\">{{fname}} {{lname}}</div>' +\r\n                     '<div class=\"admin-grid-col\">{{title}}</div>' +\r\n                     '<div class=\"admin-grid-col\">{{active}}</div>' +\r\n\t\t\t\t\t '<div class=\"admin-grid-col\"><button class=\"btn btn-ripple btn-edit\">Edit</button><button class=\"btn btn-ripple btn-delete\">Delete</button></div>' +\r\n\t\t\t\t\t '</div>',\r\n\t\t\trowTmplHeaders: ['', 'Name', '', 'Title', 'Active'],\r\n\t\t\trowTmplProps: ['bioId', 'fname', 'lname', 'title', 'active']\r\n\t\t},\r\n\t\teditItem: {\r\n\t\t\tfn: 'biosGetJson',\r\n\t\t\tparams: {},\r\n\t\t\titemId: 'bioId',\r\n\t\t\tcallback: editItemCallback\r\n\t\t},\r\n\t\tsaveItem: {\r\n\t\t\tfn: 'bioSave',\r\n\t\t\titemId: 'bioId',\r\n            sendAsString: true\r\n\t\t},\r\n\t\tdeleteItem: {\r\n\t\t\tfn: 'bioDelete',\r\n\t\t\titemId: 'bioId'\r\n\t\t},\r\n\t\tback: {\r\n\t\t\tfn: back\r\n\t\t},\r\n\t\tadditionalProperties: {\r\n            imgPath: '',\r\n            imgFileName: ''\r\n        }\r\n\t} );\r\n\r\n\tconst btnUploadImg = app.$( '#btn-upload-img' );\r\n\tconst fUploadImg = app.$( '#f-upload-img' );\r\n\tconst prevImg = app.$( '#prev-img' );\r\n\tconst btnImgDelete = app.$( '#btn-img-delete' );\r\n\r\n\tbtnUploadImg.addEventListener( 'click', e => fUploadImg.click() );\r\n\r\n\tfUploadImg.addEventListener( 'change', e => {\r\n\t\tlet files = e.dataTransfer ? e.dataTransfer.files : e.currentTarget.files,\r\n\t\t\tfile = files[0];\r\n\r\n\t\tadminForm.uploadHelper( file, true, '/admin/uploadImg.ashx', {\r\n            'X-Min-Width': 354,\r\n            'X-Min-Height': 278,\r\n            'X-File-Path': 'img/team/'\r\n        }, rsp => {\r\n\t\t\tif ( rsp ) {\r\n\t\t\t\tadminForm.setAdditionalPropertyData( 'imgPath', rsp.filePath );\r\n\t\t\t\tadminForm.setAdditionalPropertyData( 'imgFileName', rsp.fileName );\r\n\t\t\t\tsetPrevImg( rsp.filePath );\r\n\t\t\t}\r\n\r\n\t\t\tfUploadImg.value = '';\r\n\t\t} ); \r\n\t} );\r\n\r\n\tbtnImgDelete.addEventListener( 'click', e => {\r\n\t\talert.promptAlert( 'Confirm Delete', '<p>Are you sure you want to delete this image?', 'Delete', 'Cancel', evt => {\r\n\t\t\tadminForm.setAdditionalPropertyData( 'imgPath', '' );\r\n\t\t\tadminForm.setAdditionalPropertyData( 'imgFileName', '' );\r\n\t\t\tsetPrevImg( '' );\r\n\t\t\talert.dismissAlert();\r\n\t\t\tevt.preventDefault();\r\n\t\t}, evt => {\r\n\t\t\talert.dismissAlert();\r\n\t\t\tevt.preventDefault();\r\n\t\t} );\r\n\t} );\r\n\r\n\tfunction editItemCallback( obj ) {\r\n\t\tsetPrevImg( adminForm.getAdditionalPropertyData( 'imgPath' ) );\r\n\t}\r\n\r\n\tfunction setPrevImg( filePath ) {\r\n\t\tif ( filePath === '' ) {\r\n\t\t\tprevImg.innerHTML = '';\r\n\t\t\tbtnImgDelete.classList.add( 'hidden' );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tprevImg.innerHTML = '<img src=\"' + filePath + '\" />';\r\n\t\tbtnImgDelete.classList.remove( 'hidden' );\r\n\t}\r\n\r\n\tfunction back() {\r\n\t\tsetPrevImg( '' );\r\n\t}\r\n\r\n}( document ) );"]}