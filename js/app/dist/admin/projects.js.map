{"version":3,"sources":["../../admin/projects.js"],"names":["doc","alert","app","Alert","adminForm","AdminForm","labelItemText","labelItemsText","loadItems","fn","params","projectId","rowTmpl","rowTmplHeaders","rowTmplProps","editItem","itemId","callback","editItemCallback","saveItem","sendAsString","saveItemCallback","deleteItem","back","additionalProperties","imgPath","imgFileName","gridImgPath","gridImgFileName","ddlTags","$","_ddlTags","ddlIndustries","_ddlIndustries","ddlPartners","_ddlPartners","chosen","btnUploadGridImg","fUploadGridImg","prevGridImg","btnGridImgDelete","uploadGridImgPath","minGridImgWidth","minGridImgHeight","btnUploadImg","fUploadImg","prevImg","btnImgDelete","uploadPath","minImgWidth","minImgHeight","addEventListener","click","files","e","dataTransfer","currentTarget","file","uploadHelper","rsp","setAdditionalPropertyData","filePath","fileName","setPrevGridImg","value","promptAlert","dismissAlert","evt","preventDefault","setPrevImg","obj","fetch","body","tagId","then","success","tags","forEach","children","tag","parseInt","opt","selected","trigger","industryId","industries","ind","partnerId","partners","partner","getAdditionalPropertyData","innerHTML","classList","add","remove","push","document"],"mappings":"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","file":"projects.js","sourcesContent":["/**\r\n* Copyright 2016 Select Interactive, LLC. All rights reserved.\r\n* @author: The Select Interactive dev team (www.select-interactive.com)\r\n*/\r\n(function( doc ) {\r\n    'use strict';\r\n\r\n    const alert = new app.Alert();\r\n\r\n    let adminForm = new app.AdminForm( {\r\n\t\tlabelItemText: 'Project',\r\n\t\tlabelItemsText: 'Projects',\r\n\t\tloadItems: {\r\n\t\t\tfn: 'projectsGetJson',\r\n\t\t\tparams: {\r\n                projectId: -1\r\n            },\r\n\t\t\trowTmpl: '<div class=\"admin-grid-row{{rowClass}}\" data-id=\"{{projectId}}\">' +\r\n\t\t\t\t\t '<div class=\"admin-grid-col admin-grid-col-primary\">{{name}}</div>' +\r\n                     '<div class=\"admin-grid-col\">{{active}}</div>' +\r\n\t\t\t\t\t '<div class=\"admin-grid-col\"><button class=\"btn btn-ripple btn-edit\">Edit</button><button class=\"btn btn-ripple btn-delete\">Delete</button></div>' +\r\n\t\t\t\t\t '</div>',\r\n\t\t\trowTmplHeaders: ['', 'Name', 'Active'],\r\n\t\t\trowTmplProps: ['projectId', 'name', 'active']\r\n\t\t},\r\n\t\teditItem: {\r\n\t\t\tfn: 'projectsGetJson',\r\n\t\t\tparams: {},\r\n\t\t\titemId: 'projectId',\r\n            callback: editItemCallback\r\n\t\t},\r\n\t\tsaveItem: {\r\n\t\t\tfn: 'projectSave',\r\n\t\t\titemId: 'projectId',\r\n            sendAsString: true,\r\n            callback: saveItemCallback\r\n\t\t},\r\n\t\tdeleteItem: {\r\n\t\t\tfn: 'projectDelete',\r\n\t\t\titemId: 'projectId'\r\n\t\t},\r\n\t\tback: {\r\n            fn: back\r\n        },\r\n\t\tadditionalProperties: {\r\n            imgPath: '',\r\n            imgFileName: '',\r\n            gridImgPath: '',\r\n            gridImgFileName: ''\r\n        }\r\n\t} );\r\n\r\n    const ddlTags = app.$( '#ddl-tags' );\r\n    const _ddlTags = $( ddlTags );\r\n    const ddlIndustries = app.$( '#ddl-industries' );\r\n    const _ddlIndustries = $( ddlIndustries );\r\n    const ddlPartners = app.$( '#ddl-partners' );\r\n    const _ddlPartners = $( ddlPartners );\r\n\r\n    _ddlTags.chosen();\r\n    _ddlIndustries.chosen();\r\n    _ddlPartners.chosen();\r\n\r\n    const btnUploadGridImg = app.$( '#btn-upload-grid-img' );\r\n\tconst fUploadGridImg = app.$( '#f-upload-grid-img' );\r\n\tconst prevGridImg = app.$( '#prev-grid-img' );\r\n\tconst btnGridImgDelete = app.$( '#btn-grid-img-delete' );\r\n\r\n    const uploadGridImgPath = 'img/projects/';\r\n    const minGridImgWidth = 1000;\r\n    const minGridImgHeight = 590;\r\n\r\n    const btnUploadImg = app.$( '#btn-upload-img' );\r\n\tconst fUploadImg = app.$( '#f-upload-img' );\r\n\tconst prevImg = app.$( '#prev-img' );\r\n\tconst btnImgDelete = app.$( '#btn-img-delete' );\r\n\r\n    const uploadPath = 'img/projects/';\r\n    const minImgWidth = 1000;\r\n    const minImgHeight = 762;\r\n\r\n    btnUploadGridImg.addEventListener( 'click', e => fUploadGridImg.click() );\r\n\r\n    fUploadGridImg.addEventListener( 'change', e => {\r\n\t\tlet files = e.dataTransfer ? e.dataTransfer.files : e.currentTarget.files,\r\n\t\t\tfile = files[0];\r\n\r\n\t\tadminForm.uploadHelper( file, true, '/admin/uploadImg.ashx', {\r\n            'X-Min-Width': minGridImgWidth,\r\n            'X-Min-Height': minGridImgHeight,\r\n            'X-File-Path': uploadGridImgPath\r\n        }, rsp => {\r\n\t\t\tif ( rsp ) {\r\n\t\t\t\tadminForm.setAdditionalPropertyData( 'gridImgPath', rsp.filePath );\r\n\t\t\t\tadminForm.setAdditionalPropertyData( 'gridImgFileName', rsp.fileName );\r\n\t\t\t\tsetPrevGridImg( rsp.filePath );\r\n\t\t\t}\r\n\r\n\t\t\tfUploadGridImg.value = '';\r\n\t\t} ); \r\n\t} );\r\n\r\n\tbtnGridImgDelete.addEventListener( 'click', e => {\r\n\t\talert.promptAlert( 'Confirm Delete', '<p>Are you sure you want to delete this image?', 'Delete', 'Cancel', evt => {\r\n\t\t\tadminForm.setAdditionalPropertyData( 'gridImgPath', '' );\r\n\t\t\tadminForm.setAdditionalPropertyData( 'gridImgFileName', '' );\r\n\t\t\tsetPrevGridImg( '' );\r\n\t\t\talert.dismissAlert();\r\n\t\t\tevt.preventDefault();\r\n\t\t}, evt => {\r\n\t\t\talert.dismissAlert();\r\n\t\t\tevt.preventDefault();\r\n\t\t} );\r\n\t} );\r\n\r\n\tbtnUploadImg.addEventListener( 'click', e => fUploadImg.click() );\r\n\r\n\tfUploadImg.addEventListener( 'change', e => {\r\n\t\tlet files = e.dataTransfer ? e.dataTransfer.files : e.currentTarget.files,\r\n\t\t\tfile = files[0];\r\n\r\n\t\tadminForm.uploadHelper( file, true, '/admin/uploadImg.ashx', {\r\n            'X-Min-Width': minImgWidth,\r\n            'X-Min-Height': minImgHeight,\r\n            'X-File-Path': uploadPath\r\n        }, rsp => {\r\n\t\t\tif ( rsp ) {\r\n\t\t\t\tadminForm.setAdditionalPropertyData( 'imgPath', rsp.filePath );\r\n\t\t\t\tadminForm.setAdditionalPropertyData( 'imgFileName', rsp.fileName );\r\n\t\t\t\tsetPrevImg( rsp.filePath );\r\n\t\t\t}\r\n\r\n\t\t\tfUploadImg.value = '';\r\n\t\t} ); \r\n\t} );\r\n\r\n\tbtnImgDelete.addEventListener( 'click', e => {\r\n\t\talert.promptAlert( 'Confirm Delete', '<p>Are you sure you want to delete this image?', 'Delete', 'Cancel', evt => {\r\n\t\t\tadminForm.setAdditionalPropertyData( 'imgPath', '' );\r\n\t\t\tadminForm.setAdditionalPropertyData( 'imgFileName', '' );\r\n\t\t\tsetPrevImg( '' );\r\n\t\t\talert.dismissAlert();\r\n\t\t\tevt.preventDefault();\r\n\t\t}, evt => {\r\n\t\t\talert.dismissAlert();\r\n\t\t\tevt.preventDefault();\r\n\t\t} );\r\n\t} );\r\n\r\n    function editItemCallback( obj ) {\r\n        app.$.fetch( '/api/projectTagsGetJson', {\r\n            body: {\r\n                tagId: -1,\r\n                projectId: obj.projectId\r\n            }\r\n        } ).then( rsp => {\r\n            if ( rsp.success ) {\r\n                let tags = rsp.obj;\r\n\r\n                tags.forEach( tag => {\r\n                    app.$.forEach( ddlTags.children, opt => {\r\n                        if ( tag.tagId === parseInt( opt.value, 10 ) ) {\r\n                            opt.selected = true;\r\n                        }\r\n                    } );\r\n                } );\r\n\r\n                _ddlTags.trigger( 'chosen:updated' );\r\n            }\r\n        } );\r\n\r\n        app.$.fetch( '/api/industriesGetJson', {\r\n            body: {\r\n                industryId: -1,\r\n                projectId: obj.projectId\r\n            }\r\n        } ).then( rsp => {\r\n            if ( rsp.success ) {\r\n                let industries = rsp.obj;\r\n\r\n                industries.forEach( ind => {\r\n                    app.$.forEach( ddlIndustries.children, opt => {\r\n                        if ( ind.industryId === parseInt( opt.value, 10 ) ) {\r\n                            opt.selected = true;\r\n                        }\r\n                    } );\r\n                } );\r\n\r\n                _ddlIndustries.trigger( 'chosen:updated' );\r\n            }\r\n        } );\r\n\r\n        app.$.fetch( '/api/partnersGetJson', {\r\n            body: {\r\n                partnerId: -1,\r\n                projectId: obj.projectId\r\n            }\r\n        } ).then( rsp => {\r\n            if ( rsp.success ) {\r\n                let partners = rsp.obj;\r\n\r\n                partners.forEach( partner => {\r\n                    app.$.forEach( ddlPartners.children, opt => {\r\n                        if ( partner.partnerId === parseInt( opt.value, 10 ) ) {\r\n                            opt.selected = true;\r\n                        }\r\n                    } );\r\n                } );\r\n\r\n                _ddlPartners.trigger( 'chosen:updated' );\r\n            }\r\n        } );\r\n\r\n        setPrevImg( adminForm.getAdditionalPropertyData( 'imgPath' ) );\r\n        setPrevGridImg( adminForm.getAdditionalPropertyData( 'gridImgPath' ) );\r\n    }\r\n\r\n    function setPrevGridImg( filePath ) {\r\n\t\tif ( filePath === '' ) {\r\n\t\t\tprevGridImg.innerHTML = '';\r\n\t\t\tbtnGridImgDelete.classList.add( 'hidden' );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tprevGridImg.innerHTML = '<img src=\"' + filePath + '\" />';\r\n\t\tbtnGridImgDelete.classList.remove( 'hidden' );\r\n\t}\r\n\r\n    function setPrevImg( filePath ) {\r\n\t\tif ( filePath === '' ) {\r\n\t\t\tprevImg.innerHTML = '';\r\n\t\t\tbtnImgDelete.classList.add( 'hidden' );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tprevImg.innerHTML = '<img src=\"' + filePath + '\" />';\r\n\t\tbtnImgDelete.classList.remove( 'hidden' );\r\n\t}\r\n\r\n    function saveItemCallback() {\r\n        let tags = [];\r\n        let industries = [];\r\n        let partners = [];\r\n\r\n        app.$.forEach( ddlTags.children, opt => {\r\n            if ( opt.selected ) {\r\n                tags.push( opt.value );\r\n            }\r\n        } );\r\n\r\n        app.$.forEach( ddlIndustries.children, opt => {\r\n            if ( opt.selected ) {\r\n                industries.push( opt.value );\r\n            }\r\n        } );\r\n\r\n        app.$.forEach( ddlPartners.children, opt => {\r\n            if ( opt.selected ) {\r\n                partners.push( opt.value );\r\n            }\r\n        } );\r\n\r\n        app.$.fetch( '/api/projectsTagsAssign', {\r\n            body: {\r\n                projectId: adminForm.itemId,\r\n                tags: tags\r\n            }\r\n        } );\r\n\r\n        app.$.fetch( '/api/projectsIndustriesAssign', {\r\n            body: {\r\n                projectId: adminForm.itemId,\r\n                industries: industries\r\n            }\r\n        } );\r\n\r\n        app.$.fetch( '/api/projectsPartnersAssign', {\r\n            body: {\r\n                projectId: adminForm.itemId,\r\n                partners: partners\r\n            }\r\n        } );\r\n    }\r\n\r\n    function back() {\r\n        app.$.forEach( ddlTags.children, opt => {\r\n            opt.selected = false;\r\n        } );\r\n\r\n        app.$.forEach( ddlIndustries.children, opt => {\r\n            opt.selected = false;\r\n        } );\r\n\r\n        app.$.forEach( ddlPartners.children, opt => {\r\n            opt.selected = false;\r\n        } );\r\n\r\n        _ddlTags.trigger( 'chosen:updated' );\r\n        _ddlIndustries.trigger( 'chosen:updated' );\r\n        _ddlPartners.trigger( 'chosen:updated' );\r\n\r\n        setPrevGridImg( '' );\r\n        setPrevImg( '' );\r\n    }\r\n}( document ) );"]}