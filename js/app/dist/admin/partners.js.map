{"version":3,"sources":["../../admin/partners.js"],"names":["doc","alert","app","Alert","adminForm","AdminForm","labelItemText","labelItemsText","loadItems","fn","params","partnerId","projectId","rowTmpl","rowTmplHeaders","rowTmplProps","editItem","itemId","callback","editItemCallback","saveItem","sendAsString","deleteItem","back","additionalProperties","logoPath","logoFileName","btnUploadImg","$","fUploadImg","prevImg","btnImgDelete","addEventListener","click","files","e","dataTransfer","currentTarget","file","uploadHelper","rsp","setAdditionalPropertyData","filePath","fileName","setPrevImg","value","promptAlert","dismissAlert","evt","preventDefault","obj","getAdditionalPropertyData","innerHTML","classList","add","remove","document"],"mappings":"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","file":"partners.js","sourcesContent":["/**\r\n* Copyright 2016 Select Interactive, LLC. All rights reserved.\r\n* @author: The Select Interactive dev team (www.select-interactive.com)\r\n*/\r\n(function( doc ) {\r\n    'use strict';\r\n\t\r\n\tconst alert = new app.Alert();\r\n\r\n    let adminForm = new app.AdminForm( {\r\n\t\tlabelItemText: 'Partner',\r\n\t\tlabelItemsText: 'Partners',\r\n\t\tloadItems: {\r\n\t\t\tfn: 'partnersGetJson',\r\n\t\t\tparams: {\r\n                partnerId: -1,\r\n                projectId: -1\r\n            },\r\n\t\t\trowTmpl: '<div class=\"admin-grid-row{{rowClass}}\" data-id=\"{{partnerId}}\">' +\r\n\t\t\t\t\t '<div class=\"admin-grid-col admin-grid-col-primary\">{{name}}</div>' +\r\n                     '<div class=\"admin-grid-col\">{{active}}</div>' +\r\n\t\t\t\t\t '<div class=\"admin-grid-col\"><button class=\"btn btn-ripple btn-edit\">Edit</button><button class=\"btn btn-ripple btn-delete\">Delete</button></div>' +\r\n\t\t\t\t\t '</div>',\r\n\t\t\trowTmplHeaders: ['', 'Partner', 'Active'],\r\n\t\t\trowTmplProps: ['partnerId', 'name', 'active']\r\n\t\t},\r\n\t\teditItem: {\r\n\t\t\tfn: 'partnersGetJson',\r\n\t\t\tparams: {\r\n                projectId: -1\r\n            },\r\n\t\t\titemId: 'partnerId',\r\n\t\t\tcallback: editItemCallback\r\n\t\t},\r\n\t\tsaveItem: {\r\n\t\t\tfn: 'partnerSave',\r\n\t\t\titemId: 'partnerId',\r\n            sendAsString: true\r\n\t\t},\r\n\t\tdeleteItem: {\r\n\t\t\tfn: 'partnerDelete',\r\n\t\t\titemId: 'partnerId'\r\n\t\t},\r\n\t\tback: {\r\n\t\t\tfn: back\r\n\t\t},\r\n\t\tadditionalProperties: {\r\n            logoPath: '',\r\n            logoFileName: ''\r\n        }\r\n\t} );\r\n\r\n\tconst btnUploadImg = app.$( '#btn-upload-img' );\r\n\tconst fUploadImg = app.$( '#f-upload-img' );\r\n\tconst prevImg = app.$( '#prev-img' );\r\n\tconst btnImgDelete = app.$( '#btn-img-delete' );\r\n\r\n\tbtnUploadImg.addEventListener( 'click', e => fUploadImg.click() );\r\n\r\n\tfUploadImg.addEventListener( 'change', e => {\r\n\t\tlet files = e.dataTransfer ? e.dataTransfer.files : e.currentTarget.files,\r\n\t\t\tfile = files[0];\r\n\r\n\t\tadminForm.uploadHelper( file, true, '/admin/uploadFile.ashx', {\r\n            'X-File-Path': 'img/partners/',\r\n\t\t\t'X-Mime-Type': 'image/svg+xml'\r\n        }, rsp => {\r\n\t\t\tif ( rsp ) {\r\n\t\t\t\tadminForm.setAdditionalPropertyData( 'logoPath', rsp.filePath );\r\n\t\t\t\tadminForm.setAdditionalPropertyData( 'logoFileName', rsp.fileName );\r\n\t\t\t\tsetPrevImg( rsp.filePath );\r\n\t\t\t}\r\n\r\n\t\t\tfUploadImg.value = '';\r\n\t\t} ); \r\n\t} );\r\n\r\n\tbtnImgDelete.addEventListener( 'click', e => {\r\n\t\talert.promptAlert( 'Confirm Delete', '<p>Are you sure you want to delete this image?', 'Delete', 'Cancel', evt => {\r\n\t\t\tadminForm.setAdditionalPropertyData( 'logoPath', '' );\r\n\t\t\tadminForm.setAdditionalPropertyData( 'logoFileName', '' );\r\n\t\t\tsetPrevImg( '' );\r\n\t\t\talert.dismissAlert();\r\n\t\t\tevt.preventDefault();\r\n\t\t}, evt => {\r\n\t\t\talert.dismissAlert();\r\n\t\t\tevt.preventDefault();\r\n\t\t} );\r\n\t} );\r\n\r\n\tfunction editItemCallback( obj ) {\r\n\t\tsetPrevImg( adminForm.getAdditionalPropertyData( 'logoPath' ) );\r\n\t}\r\n\r\n\tfunction setPrevImg( filePath ) {\r\n\t\tif ( filePath === '' ) {\r\n\t\t\tprevImg.innerHTML = '';\r\n\t\t\tbtnImgDelete.classList.add( 'hidden' );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tprevImg.innerHTML = '<img style=\"max-width:300px;\" src=\"' + filePath + '\" />';\r\n\t\tbtnImgDelete.classList.remove( 'hidden' );\r\n\t}\r\n\r\n\tfunction back() {\r\n\t\tsetPrevImg( '' );\r\n\t}\r\n\r\n}( document ) );"]}