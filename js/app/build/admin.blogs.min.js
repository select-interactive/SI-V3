app.bios=function(a,b){"use strict";function c(){d()}function d(){b(v).chosen()}function e(){f(),g(),C.checked=app.admin.getOtherDataProperty("active"),app.forms.checkActive(),o(app.admin.getOtherDataProperty("banner")),p(app.admin.getOtherDataProperty("thumbnail")),C.checked=app.admin.getOtherDataProperty("active")}function f(){var a=app.admin.getOtherDataProperty("category"),b=u.parentNode.querySelectorAll(".select-opt");""!==a&&(window.forEachElement(b,function(b){b.getAttribute("data-val")===a&&b.classList.add("active")}),app.forms.checkSelectValues(u))}function g(){var a,c,d=app.admin.getOtherDataProperty("tags"),e=0;if(d&&d.length){for(d=d.split(","),a=d.length;a>e;e++)c=d[e],v.querySelector('[value="'+c+'"]').selected=!0;b(v).trigger("chosen:updated")}}function h(){w.click()}function i(a){var b=a.dataTransfer?a.dataTransfer.files:a.currentTarget.files,c=b[0];app.admin.uploadFile(c,!0,"/admin/blogs/uploadImg.ashx",function(a){a&&setTimeout(function(){app.admin.setOtherDataProperty("banner",a),o(a)},500)})}function j(a){app.admin.setOtherDataProperty("banner",""),o(null)}function k(){z.click()}function l(a){var b=a.dataTransfer?a.dataTransfer.files:a.currentTarget.files,c=b[0];app.admin.uploadFile(c,!0,"/admin/blogs/uploadImgThumb.ashx",function(a){a&&setTimeout(function(){app.admin.setOtherDataProperty("thumbnail",a),p(a)},500)})}function m(a){app.admin.setOtherDataProperty("thumbnail",""),p(null)}function n(){var a=app.admin.collectData(),b=app.admin.validateReqFields();b&&(a.category="",a.categoryName="",window.forEachElement(u.querySelectorAll("option"),function(b,c){b.selected&&(a.category=b.value,a.categoryName=b.text,a.categoryUrl=b.getAttribute("data-category-url"))}),a.tags="",a.tagNames="",a.tagUrls="",window.forEachElement(v.querySelectorAll("option"),function(b,c){b.selected&&(""!==a.tags&&(a.tags+=",",a.tagNames+=", ",a.tagUrls+=","),a.tags+=b.value,a.tagNames+=b.text,a.tagUrls+=b.getAttribute("data-tag-url"))}),a.active=C.checked,a.url=app.admin.createUrl(a.title,a.datePublished),a.datePublished=new Date(a.datePublished),app.admin.saveItem(q.save.fn,a))}function o(a){a&&a.length?(x.innerHTML='<img src="/img/news/med/'+a+'" />',y.classList.remove("hidden")):(x.innerHTML="",y.classList.add("hidden"))}function p(a){a&&a.length?(A.innerHTML='<img src="/img/news/thumb/'+a+'" />',B.classList.remove("hidden")):(A.innerHTML="",B.classList.add("hidden"))}var q={itemId:-1,load:{callback:e},save:{fn:"saveItem"},del:!0,item:"Blog",setOptionText:function(a){return a.get("title")}},r={object:"Blog",querySort:"-datePublished"},s=[{el:a.getElementById("btn-item-save"),evtName:"click",handler:n},{el:a.getElementById("btn-img-trigger"),evtName:"click",handler:h},{el:a.getElementById("f-img"),evtName:"change",handler:i},{el:a.getElementById("btn-img-delete"),evtName:"click",handler:j},{el:a.getElementById("btn-img-thumb-trigger"),evtName:"click",handler:k},{el:a.getElementById("f-img-thumb"),evtName:"change",handler:l},{el:a.getElementById("btn-img-thumb-delete"),evtName:"click",handler:m}],t={active:!1,banner:"",category:"",tags:"",thumbnail:""},u=a.getElementById("ddl-category"),v=a.getElementById("ddl-tags"),w=a.getElementById("f-img"),x=a.getElementById("img-prev"),y=a.getElementById("btn-img-delete"),z=a.getElementById("f-img-thumb"),A=a.getElementById("img-thumb-prev"),B=a.getElementById("btn-img-thumb-delete"),C=a.getElementById("cb-active");app.admin.init(q,r,s,t,n),c()}(document,jQuery);