!function(a,b){"use strict";function c(){d()}function d(){b(z).chosen()}function e(){f(),app.forms.checkActive(),n(app.admin.getOtherDataProperty("thumbnail")),o(app.admin.getOtherDataProperty("primaryImg")),A.checked=app.admin.getOtherDataProperty("active")}function f(){var a,c,d=app.admin.getOtherDataProperty("tags"),e=0;if(d&&d.length){for(d=d.split(","),a=d.length;a>e;e++)c=d[e],z.querySelector('[value="'+c+'"]').selected=!0;b(z).trigger("chosen:updated")}}function g(){t.click()}function h(a){var b=a.dataTransfer?a.dataTransfer.files:a.currentTarget.files,c=b[0];app.admin.uploadFile(c,!0,"/admin/projects/uploadImg.ashx",function(a){a&&setTimeout(function(){app.admin.setOtherDataProperty("thumbnail",a),n(a)},500)})}function i(a){app.admin.setOtherDataProperty("thumbnail",""),n(null)}function j(){w.click()}function k(a){var b=a.dataTransfer?a.dataTransfer.files:a.currentTarget.files,c=b[0];app.admin.uploadFile(c,!0,"/admin/projects/uploadMonitorImg.ashx",function(a){a&&setTimeout(function(){app.admin.setOtherDataProperty("primaryImg",a),o(a)},500)})}function l(a){app.admin.setOtherDataProperty("primaryImg",""),o(null)}function m(){var a=app.admin.collectData(),b=app.admin.validateReqFields();b&&(a.tags="",a.tagNames="",a.tagUrls="",window.forEachElement(z.querySelectorAll("option"),function(b,c){b.selected&&(""!==a.tags&&(a.tags+=",",a.tagNames+=", ",a.tagUrls+=","),a.tags+=b.value,a.tagNames+=b.text,a.tagUrls+=b.getAttribute("data-tag-url"))}),a.sortOrder=parseInt(a.sortOrder,10),a.active=A.checked,app.admin.saveItem(p.save.fn,a))}function n(a){a&&a.length?(u.innerHTML='<img src="/img/projects/'+a+'" />',v.classList.remove("hidden")):(u.innerHTML="",v.classList.add("hidden"))}function o(a){a&&a.length?(x.innerHTML='<img src="/img/projects/primary/'+a+'" />',y.classList.remove("hidden")):(x.innerHTML="",y.classList.add("hidden"))}var p={itemId:-1,load:{callback:e},save:{fn:"saveItem"},del:!0,item:"Project",setOptionText:function(a){return a.get("name")}},q={object:"Project",querySort:"sortOrder"},r=[{el:a.getElementById("btn-item-save"),evtName:"click",handler:m},{el:a.getElementById("btn-img-trigger"),evtName:"click",handler:g},{el:a.getElementById("f-img"),evtName:"change",handler:h},{el:a.getElementById("btn-img-delete"),evtName:"click",handler:i},{el:a.getElementById("btn-img-monitor-trigger"),evtName:"click",handler:j},{el:a.getElementById("f-img-monitor"),evtName:"change",handler:k},{el:a.getElementById("btn-img-monitor-delete"),evtName:"click",handler:l}],s={active:!1,primaryImg:"",tags:"",thumbnail:""},t=a.getElementById("f-img"),u=a.getElementById("img-prev"),v=a.getElementById("btn-img-delete"),w=a.getElementById("f-img-monitor"),x=a.getElementById("img-monitor-prev"),y=a.getElementById("btn-img-monitor-delete"),z=a.getElementById("ddl-tags"),A=a.getElementById("cb-active");app.admin.init(p,q,r,s,m),c()}(document,jQuery);